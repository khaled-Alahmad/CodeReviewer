# 🚀 دليل البدء السريع - نشر نظام إدارة المدرسة

## 📦 ملفات المشروع الجاهزة للنشر

تم تجهيز جميع الملفات اللازمة لنشر المشروع على VPS:

### ✅ الملفات الأساسية:
- **database_backup.sql** (65 KB) - نسخة احتياطية كاملة من قاعدة البيانات مع جميع البيانات
- **deploy.sh** - سكريبت نشر تلقائي لـ HestiaCP  
- **.env.example** - مثال على ملف المتغيرات البيئية
- **package.json** - جميع التبعيات المطلوبة

### 📚 ملفات التوثيق:
- **DEPLOYMENT_README.md** - دليل النشر السريع (إنجليزي)
- **VPS_DEPLOYMENT.md** - دليل تفصيلي شامل للنشر
- **هذا الملف** - تعليمات البدء السريع (عربي)

---

## 🎯 خيارات النشر

### الخيار 1️⃣: نشر تلقائي على HestiaCP (موصى به)

#### الخطوات:

**1. تعديل ملف النشر:**
```bash
nano deploy.sh
```

عدّل المتغيرات التالية:
```bash
VPS_USER="admin"                    # اسم المستخدم في VPS
VPS_HOST="192.168.1.100"           # IP الخادم أو Domain
DOMAIN="school.example.com"         # النطاق الخاص بك
DB_NAME="school_db"                 # اسم قاعدة البيانات
DB_USER="school_user"               # مستخدم قاعدة البيانات
DB_PASS="كلمة_مرور_قوية_جداً"      # كلمة المرور
```

**2. تشغيل السكريبت:**
```bash
chmod +x deploy.sh
./deploy.sh
```

**3. إعداد Proxy في HestiaCP:**
- افتح لوحة HestiaCP
- Web → [اختر النطاق] → Edit
- Advanced Options → Proxy Template → **NodeJS**
- Save ✅

**✨ انتهى! موقعك جاهز على:** `https://school.example.com`

---

### الخيار 2️⃣: نشر يدوي (لأي VPS)

#### المتطلبات:
- Ubuntu 20.04 أو أحدث
- Node.js 20.x
- PostgreSQL 14+
- Nginx
- PM2

#### الخطوات السريعة:

**1. تثبيت المتطلبات:**
```bash
# Node.js 20
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs postgresql nginx

# PM2
sudo npm install -g pm2
```

**2. إعداد قاعدة البيانات:**
```bash
sudo -u postgres psql

CREATE DATABASE school_management;
CREATE USER school_admin WITH PASSWORD 'كلمة_مرور_قوية';
GRANT ALL PRIVILEGES ON DATABASE school_management TO school_admin;
\q

# استيراد البيانات
psql -U school_admin -d school_management < database_backup.sql
```

**3. رفع ملفات المشروع:**
```bash
# من جهازك المحلي
scp -r /path/to/project/* user@vps-ip:/var/www/school/
```

**4. تكوين وتشغيل:**
```bash
cd /var/www/school

# إنشاء ملف .env
cp .env.example .env
nano .env
# عدّل DATABASE_URL و SESSION_SECRET

# تثبيت وبناء
npm install
npm run build
npm run db:push --force

# تشغيل
pm2 start npm --name school -- start
pm2 save
pm2 startup
```

**5. إعداد Nginx:**
```bash
sudo nano /etc/nginx/sites-available/school
```

أضف:
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

```bash
sudo ln -s /etc/nginx/sites-available/school /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

**6. SSL مجاني (اختياري):**
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

---

## 🔐 ملاحظات أمنية مهمة

### ⚠️ يجب تغيير:
1. **كلمة مرور قاعدة البيانات** في deploy.sh أو يدوياً
2. **SESSION_SECRET** في ملف .env (استخدم مفتاح عشوائي طويل)
3. **كلمات مرور المستخدمين** الافتراضية في النظام

### 🛡️ تأمين الخادم:
```bash
# Firewall
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp  
sudo ufw allow 443/tcp
sudo ufw enable

# تحديثات أمنية
sudo apt update && sudo apt upgrade -y
```

---

## 📊 إدارة التطبيق

### مراقبة الحالة:
```bash
pm2 status                  # حالة التطبيق
pm2 logs school            # السجلات المباشرة
pm2 monit                  # مراقبة الموارد
```

### التحكم:
```bash
pm2 restart school         # إعادة تشغيل
pm2 stop school           # إيقاف
pm2 start school          # تشغيل
```

### نسخ احتياطي منتظم:
```bash
# نسخ قاعدة البيانات
pg_dump -U school_admin school_management > backup_$(date +%Y%m%d).sql
```

---

## 🆘 حل المشاكل

### التطبيق لا يعمل؟
```bash
pm2 logs school --lines 100    # تحقق من الأخطاء
```

### مشكلة في قاعدة البيانات؟
```bash
sudo -u postgres psql
\l                            # عرض القواعد
\c school_management          # الاتصال
\dt                           # عرض الجداول
```

### Nginx لا يعمل؟
```bash
sudo nginx -t                 # فحص التكوين
sudo tail -f /var/log/nginx/error.log
```

---

## 📞 للمساعدة الإضافية

- **الدليل الشامل:** `VPS_DEPLOYMENT.md`
- **دليل سريع:** `DEPLOYMENT_README.md`
- **سجلات النظام:** `/var/log/` أو `pm2 logs`

---

## ✨ معلومات المشروع

**نظام إدارة المدرسة - الإصدار 1.0**

### المميزات:
✅ إدارة الطلاب والمعلمين
✅ حضور وغياب المعلمين مع خصم تلقائي
✅ إدخال ودرجات الطلاب
✅ المحاسبة والرسوم المدرسية
✅ تقارير وإحصائيات شاملة
✅ واجهة عربية كاملة مع دعم الوضع الليلي

**تم التطوير بواسطة:** TRENDIFY PLUS

---

**📌 ملاحظة:** تأكد من عمل نسخ احتياطية منتظمة لقاعدة البيانات!
